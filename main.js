(()=>{"use strict";var e={formSelector:".popup__form",inputSelector:".popup__form-input",submitButtonSelector:".popup__form-button",errorClass:"popup__form-error_visible"};function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=function(){function e(t){var n=t.id,r=t.nameSelector,o=t.jobSelector,i=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=n,this._nameElement=document.querySelector(r),this._jobElement=document.querySelector(o),this._avatarElement=document.querySelector(i)}var n,r;return n=e,(r=[{key:"getUserInfo",value:function(){return{id:this._id,name:this._nameElement.textContent,job:this._jobElement.textContent,avatar:this._avatarElement.getAttribute("src")}}},{key:"setUserInfo",value:function(e){var t=e.id,n=e.name,r=e.job;this._id=t,this._nameElement.textContent=n,this._jobElement.textContent=r}},{key:"setAvatar",value:function(e){this._avatarElement.setAttribute("src",e)}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._section=document.querySelector(n),this._items=t.items,this._renderer=t.renderer}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._section.prepend(e)}},{key:"renderContent",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._popupClose=this._popup.querySelector(".popup__close"),this._bindedEscCloseHandler=this._handleEscClose.bind(this),this._bindOversideClickHandler=this._handleOversideClick.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_show"),document.addEventListener("keyup",this._bindedEscCloseHandler)}},{key:"close",value:function(){this._popup.classList.remove("popup_show"),document.removeEventListener("keyup",this._bindedEscCloseHandler)}},{key:"setEventListeners",value:function(){this._popup.addEventListener("click",this._bindOversideClickHandler),this._popupClose.addEventListener("click",this.close.bind(this))}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_handleOversideClick",value:function(e){e.target===e.currentTarget&&this.close()}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=y(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},p.apply(this,arguments)}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function b(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(r);if(o){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._form=n._popup.querySelector(".popup__form"),n._inputs=Array.from(n._form.querySelectorAll(".popup__form-input")),n._submitButton=n._form.querySelector("button"),n._originButtonText=n._submitButton.textContent,n._submitHandler=t,n}return t=u,(n=[{key:"setEventListeners",value:function(){var e=this;p(_(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault();var n=e._getInputValues();e._submitButton.textContent+="...",e._submitHandler(n)}))}},{key:"close",value:function(){this._submitButton.textContent=this._originButtonText,this._form.reset(),p(_(u.prototype),"close",this).call(this)}},{key:"_getInputValues",value:function(){return this._inputs.reduce((function(e,t){return l(l({},e),{},f({},t.name,t.value))}),{})}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(u);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=w(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},O.apply(this,arguments)}function w(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function k(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(r);if(o){var n=j(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return k(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._image=t._popup.querySelector(".popup__figure-img"),t._imageName=t._popup.querySelector(".popup__figure-text"),t}return t=u,(n=[{key:"open",value:function(e,t){this._image.setAttribute("src",e),this._image.setAttribute("alt",t),this._imageName.textContent=t,O(j(u.prototype),"open",this).call(this)}}])&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(u);function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._settings=t,this._form=n,this._inputs=Array.from(this._form.querySelectorAll(this._settings.inputSelector)),this._submit=this._form.querySelector(this._settings.submitButtonSelector)}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this._setEventListeners(this._form,this._submit,this._inputs)}},{key:"checkFormValidityBeforeOpen",value:function(){this._hideAllErrorMessages(this._form,this._inputs),this._toggleButtonState(this._submit,this._inputs)}},{key:"_toggleButtonState",value:function(e,t){t.some((function(e){return 1!=e.validity.valid}))?e.setAttribute("disabled",!0):e.removeAttribute("disabled")}},{key:"_checkInputValidity",value:function(e,t){t.validity.valid?this._hideErrorMessage(e,t):this._showErrorMessage(e,t)}},{key:"_showErrorMessage",value:function(e,t){e.querySelector(".".concat(t.id,"-error")).textContent=t.validationMessage}},{key:"_hideErrorMessage",value:function(e,t){e.querySelector(".".concat(t.id,"-error")).textContent=""}},{key:"_hideAllErrorMessages",value:function(e,t){var n=this;t.forEach((function(t){n._hideErrorMessage(e,t)}))}},{key:"_setEventListeners",value:function(e,t,n){var r=this;n.forEach((function(o){o.addEventListener("input",(function(){r._checkInputValidity(e,o),r._toggleButtonState(t,n)}))}))}}])&&E(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._card=t,this._likes=n,this._handler=r.bind(this),this._likeElement=t._element.querySelector(".element__like"),this._likeCounterElement=t._element.querySelector(".element__number"),this._likeElement.addEventListener("click",this._likeHendler.bind(this)),this._likeCounterElement.textContent=n.length}var t,n;return t=e,(n=[{key:"setLike",value:function(e){this._likes=e,this.updateLike()}},{key:"isLike",value:function(){return this._isHasMyLike()}},{key:"getCardId",value:function(){return this._card._id}},{key:"updateLike",value:function(){this._isHasMyLike()?this._likeElement.classList.add("element__like_active"):this._likeElement.classList.remove("element__like_active"),this._likeCounterElement.textContent=this._likes.length}},{key:"_likeHendler",value:function(e){this._likeElement.textContent=e.length,this._handler(this)}},{key:"_isHasMyLike",value:function(){var e=this;return this._likes.some((function(t){return t._id==e._card._userInfo.id}))}}])&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var T=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._card=t,this._confirmPopup=this._card._confirmPopup,this._buttonDeleteCard=this._card._element.querySelector(".element__trash"),this._buttonDeleteCard.addEventListener("click",(function(){return n._openPopup()}))}var t,n;return t=e,(n=[{key:"removeDeleteButton",value:function(){this._card._userInfo.id!=this._card._ownerId&&this._buttonDeleteCard.remove()}},{key:"_openPopup",value:function(){this._confirmPopup._form.id.value=this._card._id,this._confirmPopup.open()}}])&&q(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var I=function(){function e(t,n,r,o,i,u){var c=r.ownerId,a=r.cardId,l=r.name,f=r.link,s=r.likes;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._text=l,this._link=f,this._id=a,this._ownerId=c,this._userInfo=n.getUserInfo(),this._popupOpenHandler=o,this._element=document.querySelector(t).content.cloneNode(!0),this._elementTitle=this._element.querySelector(".element__title"),this._elementImage=this._element.querySelector(".element__image"),this._elementLike=this._element.querySelector(".element__number"),this._confirmPopup=u,this._like=new R(this,s,i),this._trash=new T(this)}var t,n;return t=e,(n=[{key:"getElement",value:function(){var e=this;return this._elementTitle.textContent=this._text,this._element.querySelector(".element").setAttribute("id",this._id),this._elementImage.setAttribute("src",this._link),this._elementImage.setAttribute("alt","Фотография места с названием '".concat(this._text,"'.")),this._elementImage.addEventListener("click",(function(){return e._handleShowImg(e._link,e._text)})),this._like.updateLike(),this._trash.removeDeleteButton(),this._element}},{key:"_handleShowImg",value:function(e,t){this._popupOpenHandler(e,t)}}])&&L(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._login=r,this._settings={method:t,headers:{authorization:o}}}var t,n;return t=e,(n=[{key:"_makeUrl",value:function(e){return"".concat(this._baseUrl,"/").concat(this._login,"/").concat(e)}},{key:"_checkResponse",value:function(e,t,n){e.ok?e.json().then((function(e){n(e)})):console.log("".concat(this._settings.method," запрос по адресу ").concat(this._makeUrl(t)," завершился ошибкой: ").concat(e.status))}},{key:"_query",value:function(e,t){var n=this;fetch(this._makeUrl(e),this._settings).then((function(r){return n._checkResponse(r,e,t)}))}}])&&x(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},D(e,t)}function H(e,t){if(t&&("object"===U(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}var M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=V(r);if(o){var n=V(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return H(this,e)});function u(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),i.call(this,"GET",e,t,n)}return t=u,(n=[{key:"query",value:function(e,t){this._query(e,t)}}])&&A(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(B);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},z(e,t)}function G(e,t){if(t&&("object"===F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function J(e){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},J(e)}var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=J(r);if(o){var n=J(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return G(this,e)});function u(e,t,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(o=i.call(this,e,t,n,r))._settings.headers["Content-Type"]="application/json",o}return t=u,(n=[{key:"query",value:function(e,t,n){this._settings.body=JSON.stringify(t),this._query(e,n)}}])&&N(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(B);function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function W(e,t){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},W(e,t)}function X(e,t){if(t&&("object"===Q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Y(e){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Y(e)}var Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W(e,t)}(i,e);var t,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Y(n);if(r){var o=Y(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return X(this,e)});function i(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,"PATCH",e,t,n)}return t=i,Object.defineProperty(t,"prototype",{writable:!1}),t}(K);function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function ee(e,t){return ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ee(e,t)}function te(e,t){if(t&&("object"===$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ne(e){return ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ne(e)}var re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ee(e,t)}(i,e);var t,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ne(n);if(r){var o=ne(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return te(this,e)});function i(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,"POST",e,t,n)}return t=i,Object.defineProperty(t,"prototype",{writable:!1}),t}(K);function oe(e){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe(e)}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e,t){return ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ue(e,t)}function ce(e,t){if(t&&("object"===oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}var le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ue(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ae(r);if(o){var n=ae(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ce(this,e)});function u(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),i.call(this,"PUT",e,t,n)}return t=u,(n=[{key:"query",value:function(e,t){this._query(e,t)}}])&&ie(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(K);function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t){return pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pe(e,t)}function ye(e,t){if(t&&("object"===fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function he(e){return he=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},he(e)}var be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pe(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=he(r);if(o){var n=he(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ye(this,e)});function u(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),i.call(this,"DELETE",e,t,n)}return t=u,(n=[{key:"query",value:function(e,t){this._query(e,t)}}])&&se(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(K);function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var de=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t,this._login=n,this._token=r,this._get=new M(this._baseUrl,this._login,this._token),this._patch=new Z(this._baseUrl,this._login,this._token),this._post=new re(this._baseUrl,this._login,this._token),this._put=new le(this._baseUrl,this._login,this._token),this._delete=new be(this._baseUrl,this._login,this._token)}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(e){this._get.query("cards",e)}},{key:"getUserInfo",value:function(e){this._get.query("users/me",e)}},{key:"updateUserInfo",value:function(e,t){this._patch.query("users/me",e,t)}},{key:"addCard",value:function(e,t){this._post.query("cards",e,t)}},{key:"updateAvatar",value:function(e,t){this._patch.query("users/me/avatar",e,t)}},{key:"setLike",value:function(e,t){this._put.query("cards/".concat(e,"/likes"),t)}},{key:"deleteLike",value:function(e,t){this._delete.query("cards/".concat(e,"/likes"),t)}},{key:"deleteCard",value:function(e,t){this._delete.query("cards/".concat(e),t)}}])&&_e(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),me=document.querySelector(".cards"),ve=document.querySelector(".popup_profile"),Oe=document.querySelector(".profile__edit"),we=ve.querySelector(".popup__form"),ge=ve.querySelector(".popup__form-input[name=name]"),ke=ve.querySelector(".popup__form-input[name=job]"),je=document.querySelector(".popup_card"),Pe=document.querySelector(".profile__button"),Ee=je.querySelector(".popup__form"),Se=document.querySelector(".popup_avatar-editing"),Ce=document.querySelector(".profile__avatar"),Re=Se.querySelector(".popup__form"),qe=new S(e,Ee),Te=new S(e,we),Le=new S(e,Re),Ie=new n({nameSelector:".profile__name",jobSelector:".profile__job",avatarSelector:".profile__avatar"}),xe=new de("https://mesto.nomoreparties.co/v1/","cohort-43","ee068133-e055-42c6-88de-c45211ca2bd0");xe.getInitialCards((function(e){e.forEach((function(e){var t=Me({ownerId:e.owner._id,cardId:e._id,name:e.name,link:e.link,likes:e.likes});Be.addItem(t.getElement())}))})),xe.getUserInfo((function(e){Ie.setUserInfo({id:e._id,name:e.name,job:e.about}),Ie.setAvatar(e.avatar)}));var Be=new o({items:[],renderer:function(e){var t=Me(e);me.append(t.getElement())}},".cards"),Ue=new d(".popup_profile",(function(e){var t={name:e.name,about:e.job};xe.updateUserInfo(t,(function(e){Ie.setUserInfo({name:e.name,job:e.about}),Ue.close()}))})),Ae=new d(".popup_card",(function(e){var t={name:e.title,link:e.link};xe.addCard(t,(function(e){t.ownerId=e.owner._id,t.cardId=e._id,t.likes=e.likes;var n=Me(t);Be.addItem(n.getElement()),Ae.close()}))})),De=new d(".popup_avatar-editing",(function(e){xe.updateAvatar({avatar:e.link},(function(e){Ie.setAvatar(e.avatar),De.close()}))})),He=new P(".popup_image"),Ve=new d(".popup_confirm-deleted",(function(e){var t=e.id;xe.deleteCard(t,(function(){document.getElementById(t).remove(),Ve.close()}))}));function Me(e){return new I(".template",Ie,e,Fe,Ne,Ve)}function Fe(e,t){He.open(e,t)}function Ne(e){e.isLike()?xe.deleteLike(e.getCardId(),(function(t){e.setLike(t.likes)})):xe.setLike(e.getCardId(),(function(t){e.setLike(t.likes)}))}Ue.setEventListeners(),Ae.setEventListeners(),He.setEventListeners(),De.setEventListeners(),Ve.setEventListeners(),Pe.addEventListener("click",(function(){qe.checkFormValidityBeforeOpen(),Ae.open()})),Oe.addEventListener("click",(function(){var e=Ie.getUserInfo(),t=e.name,n=e.job;ge.value=t,ke.value=n,Te.checkFormValidityBeforeOpen(),Ue.open()})),Ce.addEventListener("click",(function(){Le.checkFormValidityBeforeOpen(),De.open()})),qe.enableValidation(),Te.enableValidation(),Le.enableValidation()})();